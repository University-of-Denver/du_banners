name: e2e for D9 DU Core Profile

on:
  pull_request:
    branches: [ main ]
  workflow_dispatch:
    inputs:
      upstream_ref:
        description: 'Optional ref (branch/tag/SHA) of d9-composer-managed to use'
        required: false
        default: ''

concurrency:
  group: e2e-d9-${{ github.ref }}
  cancel-in-progress: true

jobs:
  playwright:
    uses: DU-University-Relations/.github/.github/workflows/playwright-d9-reusable.yml@main
    with:
      enabled_modules: "du_banners"
      test_tags: "@banners"
      profile_ref: ${{ github.event.inputs.upstream_ref || '' }}
    secrets:
      D9_PROFILE_PAT: ${{ secrets.D9_PROFILE_PAT }}
      MS_TEAMS_FAILED_TEST_RUN_WEBHOOK_URL: ${{ secrets.MS_TEAMS_FAILED_TEST_RUN_WEBHOOK_URL }}